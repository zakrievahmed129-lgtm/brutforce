<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Paramètres PWA et iOS -->
    <meta name="theme-color" content="#020617">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ahmed V9">
    
    <!-- Manifest corrigé pour PC -->
    <link rel="manifest" href='data:application/json,{"name":"Ahmed BruteForce V9","short_name":"AhmedV9","start_url":".","display":"standalone","background_color":"#020617","theme_color":"#020617","icons":[{"src":"https://cdn-icons-png.flaticon.com/512/2092/2092663.png","sizes":"512x512","type":"image/png"}]}'>

    <title>BruteForce Ultra-Performance - Ahmed V9</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;700;900&display=swap');
        
        html, body {
            height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #020617; 
            color: #f8fafc; 
            font-family: 'Inter', sans-serif; 
        }

        body { 
            display: flex;
            flex-direction: column;
        }

        .code-font { font-family: 'Fira+Code', monospace; }
        .stats-card { background: linear-gradient(145deg, #1e293b, #0f172a); border: 1px solid #334155; }
        
        .security-bar-container { height: 8px; background: #1e293b; border-radius: 4px; overflow: hidden; width: 100%; }
        #securityBar { width: 0%; height: 100%; transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        
        .advice-item { border-left: 2px solid #334155; padding-left: 10px; margin-bottom: 12px; font-size: 11px; }
        .advice-check { color: #10b981; border-left-color: #10b981; }
        .advice-warn { color: #f87171; border-left-color: #ef4444; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        @keyframes pulse-blue {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
        .worker-active { animation: pulse-blue 1.5s infinite; border-color: #3b82f6 !important; }
        
        #installToast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(150%);
            background: #1e293b;
            border: 1px solid #3b82f6;
            padding: 16px 20px;
            border-radius: 16px;
            z-index: 1000;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
        }
        #installToast.show { transform: translateX(-50%) translateY(0); }

        /* Ajustements pour PC/Desktop */
        @media (min-width: 1024px) {
            .main-content { height: calc(100vh - 120px); }
        }

        @media (max-width: 1024px) {
            html, body { overflow-y: auto; height: auto; min-height: 100%; }
        }
    </style>
</head>
<body class="p-2 md:p-6">
    <!-- Pop-up d'installation dynamique -->
    <div id="installToast" class="flex flex-col items-center gap-3">
        <p id="installMessage" class="text-xs font-bold text-center text-white">
            INSTALLATION<br>
            <span class="text-slate-400 font-normal">Initialisation...</span>
        </p>
        <button onclick="document.getElementById('installToast').classList.remove('show')" class="text-[9px] text-slate-500 uppercase border border-slate-700 px-3 py-1 rounded-full">Fermer</button>
    </div>

    <div class="max-w-[1600px] mx-auto w-full flex flex-col h-full space-y-4">
        <header class="flex flex-col md:flex-row items-center gap-4 md:gap-6 border-b border-slate-800 pb-4">
            <div class="flex-shrink-0 text-center md:text-left">
                <h1 class="text-2xl md:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-400 uppercase tracking-tighter">
                    Force Brute V9
                </h1>
                <p class="text-[10px] text-slate-500 uppercase tracking-[0.3em] font-bold">Ahmed - Nitro Engine</p>
            </div>

            <div id="securityHeader" class="flex-grow w-full stats-card px-6 py-3 rounded-2xl flex flex-col justify-center border-blue-500/20 shadow-inner">
                <div class="flex justify-between text-[11px] font-bold mb-2">
                    <div class="flex items-center gap-2">
                        <span class="text-slate-500 uppercase tracking-widest text-[9px]">Robustesse :</span>
                        <span id="securityVerdict" class="tracking-widest font-black text-blue-400">ANALYSE...</span>
                    </div>
                    <div class="flex gap-6">
                        <span id="timeToCrack" class="text-slate-400 font-mono text-[10px]">---</span>
                        <span id="entropyDisplay" class="text-slate-500 font-mono hidden md:inline">0 bits</span>
                    </div>
                </div>
                <div class="security-bar-container">
                    <div id="securityBar" class="bg-blue-500"></div>
                </div>
            </div>

            <div class="flex-shrink-0 flex gap-3 w-full md:w-auto items-center">
                <button id="fullscreenBtn" class="bg-slate-800 hover:bg-slate-700 text-white p-3 rounded-xl border border-slate-700 transition-all hidden md:block" title="Plein Écran">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
                </button>
                <button id="installAppBtn" class="bg-blue-600 hover:bg-blue-500 text-white text-[10px] font-black py-3 px-6 rounded-xl flex items-center gap-2 shadow-lg transition-all active:scale-95 uppercase tracking-widest">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    Installer
                </button>
                <div class="bg-slate-900 px-5 py-2 rounded-xl border border-slate-800 text-center flex-grow min-w-[100px]">
                    <span class="text-[9px] text-slate-500 block uppercase font-bold tracking-tighter">Moteur</span>
                    <span id="currentMode" class="text-xs font-mono font-bold text-blue-500 uppercase tracking-tighter">Ready</span>
                </div>
            </div>
        </header>

        <div class="main-content flex flex-col lg:grid lg:grid-cols-12 gap-4 flex-1 overflow-hidden">
            <!-- Rapport -->
            <div class="order-3 lg:order-1 lg:col-span-3 flex flex-col overflow-hidden h-[200px] lg:h-full">
                <section class="stats-card rounded-2xl flex flex-col h-full overflow-hidden">
                    <div class="p-4 border-b border-slate-700 bg-slate-900/50">
                        <h2 class="text-[11px] font-bold text-blue-400 uppercase tracking-widest">Audit de Sécurité</h2>
                    </div>
                    <div id="waitingMessage" class="flex-1 flex flex-col items-center justify-center p-6 text-center">
                        <div class="w-8 h-8 border-2 border-slate-700 border-t-blue-500 rounded-full animate-spin mb-3"></div>
                        <p class="text-[10px] text-slate-500 uppercase font-bold tracking-widest">Initialisation...</p>
                    </div>
                    <div id="adviceContainer" class="hidden overflow-y-auto flex-1 p-5 space-y-3"></div>
                    <div id="perfectStatus" class="hidden p-4 bg-green-900/20 border-t border-green-500/30 text-center">
                        <span class="text-green-400 font-bold italic text-[11px]">Protocole Ahmed Inviolable ! ✨</span>
                    </div>
                </section>
            </div>

            <!-- Contrôles -->
            <div class="order-1 lg:order-2 lg:col-span-3 flex flex-col space-y-4">
                <section class="stats-card p-5 rounded-2xl">
                    <h2 class="text-[11px] font-bold mb-4 uppercase text-blue-400 tracking-widest">Paramètres</h2>
                    <div class="space-y-5">
                        <div class="relative">
                            <input type="text" id="targetInput" value="ahmed" maxlength="15" 
                                class="w-full bg-black/50 border border-slate-700 rounded-xl p-4 text-white font-mono text-sm focus:ring-2 focus:ring-blue-500/50 outline-none transition-all">
                            <span class="absolute -top-2 left-3 bg-slate-900 px-1.5 text-[9px] text-slate-500 font-bold uppercase">Cible</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center gap-2 p-3 bg-slate-900/30 rounded-lg border border-slate-800/50 cursor-pointer hover:bg-slate-800/50 transition-colors">
                                <input type="checkbox" id="useLower" checked class="w-4 h-4 accent-blue-500"> <span class="text-[11px] font-mono">a-z</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-slate-900/30 rounded-lg border border-slate-800/50 cursor-pointer hover:bg-slate-800/50 transition-colors">
                                <input type="checkbox" id="useUpper" checked class="w-4 h-4 accent-blue-500"> <span class="text-[11px] font-mono">A-Z</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-slate-900/30 rounded-lg border border-slate-800/50 cursor-pointer hover:bg-slate-800/50 transition-colors">
                                <input type="checkbox" id="useNumbers" checked class="w-4 h-4 accent-blue-500"> <span class="text-[11px] font-mono">0-9</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-slate-900/30 rounded-lg border border-slate-800/50 cursor-pointer hover:bg-slate-800/50 transition-colors">
                                <input type="checkbox" id="useSymbols" class="w-4 h-4 accent-blue-500"> <span class="text-[11px] font-mono">!@#</span>
                            </label>
                        </div>
                        <button id="startBtn" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-black py-4 rounded-xl transition-all uppercase text-xs tracking-[0.2em] shadow-lg shadow-blue-900/20 active:scale-95">Executer Cluster</button>
                        <button id="stopBtn" class="w-full bg-red-600 hover:bg-red-500 text-white font-black py-4 rounded-xl hidden uppercase text-xs tracking-[0.2em] shadow-lg shadow-red-900/20">Terminer Processus</button>
                    </div>
                </section>

                <section class="stats-card p-5 rounded-2xl flex-1 flex flex-col justify-between">
                    <div class="border-l-4 border-green-500 pl-4 py-1">
                        <span class="text-[10px] text-slate-500 uppercase font-black tracking-tighter">Débit</span>
                        <div id="statSpeed" class="text-xl font-mono font-bold text-green-400 leading-none">0 h/s</div>
                    </div>
                    <div class="border-l-4 border-blue-500 pl-4 py-1">
                        <span class="text-[10px] text-slate-500 uppercase font-black tracking-tighter">Itérations</span>
                        <div id="statCount" class="text-xl font-mono font-bold text-white leading-none truncate">0</div>
                    </div>
                    <div class="border-l-4 border-purple-500 pl-4 py-1">
                        <span class="text-[10px] text-slate-500 uppercase font-black tracking-tighter">Uptime</span>
                        <div id="elapsedTime" class="text-xl font-mono font-bold text-purple-400 leading-none">00:00:00</div>
                    </div>
                </section>
            </div>

            <!-- Terminal -->
            <div class="order-2 lg:order-3 lg:col-span-6 flex flex-col space-y-4 overflow-hidden h-[400px] lg:h-full">
                <div class="bg-slate-900/50 border border-slate-800 p-4 rounded-2xl">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Cluster CPU (<span id="coreCountDisplay">0</span> threads)</h3>
                        <div class="flex gap-1">
                            <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                        </div>
                    </div>
                    <div id="workerGrid" class="grid grid-cols-4 sm:grid-cols-8 md:grid-cols-12 lg:grid-cols-12 gap-2"></div>
                </div>

                <div class="stats-card rounded-2xl overflow-hidden flex flex-col flex-1 shadow-2xl">
                    <div class="bg-black/40 px-4 py-3 border-b border-slate-700 flex justify-between items-center">
                        <span class="text-[10px] font-mono text-blue-400 font-black uppercase tracking-widest">Ahmed Console Output</span>
                        <span class="text-[8px] text-slate-600 font-mono">V9.2.1-STABLE</span>
                    </div>
                    <div id="terminal" class="p-4 overflow-y-auto flex-1 code-font text-[11px] space-y-1.5 bg-black/30">
                        <div class="text-slate-600 italic">Prêt pour l'analyse brute force...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // LE WORKER
        const workerCode = `
            self.onmessage = function(e) {
                const { target, charset, startFrom, step } = e.data;
                const charsetLen = charset.length;
                const targetLen = target.length;
                const targetCodes = new Uint8Array(target.split('').map(c => c.charCodeAt(0)));
                const charsetCodes = new Uint8Array(charset.split('').map(c => c.charCodeAt(0)));
                
                let indices = new Uint32Array(16); 
                let tempNum = BigInt(startFrom);
                for(let i = 0; i < targetLen; i++) {
                    indices[i] = Number(tempNum % BigInt(charsetLen));
                    tempNum = tempNum / BigInt(charsetLen);
                }
                
                const batchSize = 250000;
                function run() {
                    for (let b = 0; b < batchSize; b++) {
                        let match = true;
                        for (let j = 0; j < targetLen; j++) {
                            if (charsetCodes[indices[j]] !== targetCodes[targetLen - 1 - j]) {
                                match = false;
                                break;
                            }
                        }
                        if (match) {
                            let res = "";
                            for(let j = targetLen - 1; j >= 0; j--) res += charset[indices[j]];
                            self.postMessage({ type: 'FOUND', combo: res });
                            return;
                        }
                        
                        let carry = step;
                        for (let i = 0; i < targetLen; i++) {
                            indices[i] += carry;
                            if (indices[i] < charsetLen) { carry = 0; break; } 
                            else { carry = Math.floor(indices[i] / charsetLen); indices[i] = indices[i] % charsetLen; }
                        }
                    }
                    self.postMessage({ type: 'PROGRESS', count: batchSize });
                    setTimeout(run, 0);
                }
                run();
            };
        `;

        const coreCount = navigator.hardwareConcurrency || 4;
        let workers = [], isRunning = false, totalAttempts = 0n, startTime = 0;
        let timerInterval, speedInterval;

        document.getElementById('coreCountDisplay').innerText = coreCount;
        const grid = document.getElementById('workerGrid');
        for(let i=0; i<coreCount; i++){
            const d = document.createElement('div');
            d.id = `pill-${i}`;
            d.className = "border border-slate-700 bg-slate-800/20 p-2 rounded-lg text-[9px] text-center font-black text-slate-500 transition-all duration-300";
            d.innerText = `T${i+1}`;
            grid.appendChild(d);
        }

        function log(msg, type = 'info') {
            const term = document.getElementById('terminal');
            const div = document.createElement('div');
            div.className = { info: 'text-slate-400', success: 'text-green-400 font-bold', error: 'text-red-400', warn: 'text-blue-400' }[type];
            div.innerHTML = `<span class="opacity-30 mr-2">>></span>${msg}`;
            term.appendChild(div);
            term.scrollTop = term.scrollHeight;
            if(term.childNodes.length > 50) term.removeChild(term.firstChild);
        }

        function calculateEntropy(val) {
            const len = val.length; if (len === 0) return 0;
            const freq = {}; for (let c of val) freq[c] = (freq[c] || 0) + 1;
            let ent = 0; for (let c in freq) { let p = freq[c]/len; ent -= p * Math.log2(p); }
            return ent * len;
        }

        function updateUI(val) {
            const ent = Math.round(calculateEntropy(val)*10)/10;
            const bar = document.getElementById('securityBar');
            document.getElementById('entropyDisplay').innerText = `${ent} bits`;
            let score = 0;
            if (val.length >= 8) score += 20;
            if (val.length >= 12) score += 20;
            if (/[A-Z]/.test(val)) score += 20;
            if (/[0-9]/.test(val)) score += 20;
            if (/[^a-zA-Z0-9]/.test(val)) score += 20;
            
            bar.style.width = score + "%";
            bar.style.backgroundColor = score < 40 ? "#ef4444" : (score < 80 ? "#fbbf24" : "#10b981");
            document.getElementById('securityVerdict').innerText = score < 40 ? "FAIBLE" : (score < 80 ? "MOYEN" : "OPTIMAL");
            document.getElementById('timeToCrack').innerText = val.length < 5 ? "< 1 sec" : (val.length > 9 ? "> 1 siècle" : "Estimation variable");
            
            const cont = document.getElementById('adviceContainer');
            const perf = document.getElementById('perfectStatus');
            document.getElementById('waitingMessage').classList.add('hidden');
            cont.classList.remove('hidden');
            cont.innerHTML = "";
            const items = [
                { t: val.length >= 12, ok: "Longueur sécurisée", no: "Chaîne trop courte" },
                { t: /[A-Z]/.test(val), ok: "Mixité de casse", no: "Manque de majuscules" },
                { t: /[0-9]/.test(val), ok: "Chiffres inclus", no: "Manque de chiffres" }
            ];
            items.forEach(i => {
                const d = document.createElement('div');
                d.className = `advice-item ${i.t ? 'advice-check' : 'advice-warn'}`;
                d.innerHTML = `<strong>${i.t ? 'OK' : 'KO'}</strong> ${i.t ? i.ok : i.no}`;
                cont.appendChild(d);
            });
            if(score >= 100) perf.classList.remove('hidden'); else perf.classList.add('hidden');
        }

        async function start() {
            const target = document.getElementById('targetInput').value;
            const cp = [];
            if(document.getElementById('useLower').checked) cp.push('abcdefghijklmnopqrstuvwxyz');
            if(document.getElementById('useUpper').checked) cp.push('ABCDEFGHIJKLMNOPQRSTUVWXYZ');
            if(document.getElementById('useNumbers').checked) cp.push('0123456789');
            if(document.getElementById('useSymbols').checked) cp.push('!@#$%^&*()');
            const charset = cp.join('');
            if(!target || !charset) return;

            isRunning = true; totalAttempts = 0n; startTime = Date.now();
            document.getElementById('startBtn').classList.add('hidden');
            document.getElementById('stopBtn').classList.remove('hidden');
            document.getElementById('currentMode').innerText = "RUNNING";
            log("BOOTING NITRO ENGINE...", "warn");

            timerInterval = setInterval(() => {
                const d = new Date(Date.now() - startTime);
                document.getElementById('elapsedTime').innerText = d.toISOString().substr(11, 8);
            }, 1000);

            speedInterval = setInterval(() => {
                const el = (Date.now() - startTime) / 1000;
                if(el > 0) {
                    const speed = Math.floor(Number(totalAttempts)/el);
                    document.getElementById('statSpeed').innerText = speed.toLocaleString() + " h/s";
                }
                document.getElementById('statCount').innerText = totalAttempts.toLocaleString();
            }, 500);

            const b = new Blob([workerCode], {type:'application/javascript'});
            const url = URL.createObjectURL(b);
            for(let i=0; i<coreCount; i++){
                const w = new Worker(url);
                document.getElementById(`pill-${i}`).classList.add('worker-active');
                w.onmessage = e => {
                    if(e.data.type==='PROGRESS') totalAttempts += BigInt(e.data.count);
                    else if(e.data.type==='FOUND') { 
                        log("CRACK SUCCESS: ["+e.data.combo+"]", "success"); 
                        stop(); 
                    }
                };
                w.postMessage({target, charset, startFrom: i, step: coreCount});
                workers.push(w);
            }
        }

        function stop() {
            isRunning = false; workers.forEach(w => w.terminate()); workers = [];
            clearInterval(timerInterval); clearInterval(speedInterval);
            document.getElementById('startBtn').classList.remove('hidden');
            document.getElementById('stopBtn').classList.add('hidden');
            document.getElementById('currentMode').innerText = "READY";
            document.querySelectorAll('.worker-active').forEach(p => p.classList.remove('worker-active'));
            log("THREAD TERMINATED.", "info");
        }

        // Plein écran
        document.getElementById('fullscreenBtn').addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    log("Erreur plein écran : " + err.message, "error");
                });
            } else {
                document.exitFullscreen();
            }
        });

        document.getElementById('targetInput').addEventListener('input', e => updateUI(e.target.value));
        document.getElementById('startBtn').addEventListener('click', start);
        document.getElementById('stopBtn').addEventListener('click', stop);
        updateUI("ahmed");

        // GESTION INSTALLATION UNIVERSELLE
        let deferredPrompt;
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

        window.addEventListener('beforeinstallprompt', e => { 
            e.preventDefault(); 
            deferredPrompt = e; 
            log("SYSTÈME PRÊT POUR INSTALLATION PC", "warn");
            document.getElementById('installAppBtn').classList.add('animate-bounce');
        });

        document.getElementById('installAppBtn').addEventListener('click', async () => {
            const toast = document.getElementById('installToast');
            const msg = document.getElementById('installMessage');

            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    log("INSTALLATION RÉUSSIE", "success");
                    document.getElementById('installAppBtn').classList.remove('animate-bounce');
                }
                deferredPrompt = null;
            } else if (isIOS) {
                msg.innerHTML = `INSTALLATION IPHONE<br>
                    <span class="text-slate-400 font-normal">Appuyez sur</span> 
                    <svg class="inline-block mx-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
                    <span class="text-slate-400 font-normal">puis sur</span> <br>
                    <span class="text-blue-400 italic font-bold">"Sur l'écran d'accueil"</span>`;
                toast.classList.add('show');
            } else {
                msg.innerHTML = `ANALYSE DU SYSTÈME...<br><span class="text-slate-400 font-normal">Si le bouton ne réagit pas, cliquez sur l'icône d'installation dans la barre d'adresse de votre navigateur (en haut à droite).</span>`;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 6000);
            }
        });
    </script>
</body>
</html>
